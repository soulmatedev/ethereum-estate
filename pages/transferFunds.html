<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Transfer Funds</title>
	<script src="../web3.min.js"></script>
	<script src="../app.js"></script>
	<link rel="stylesheet" href="../styles.css">
</head>
<body>
<div class="container">
	<h1>Перевод средств</h1>
	<form id="transferFundsForm">
		<input type="text" id="fromAddress" placeholder="Откуда" required><br>
		<input type="text" id="toAddress" placeholder="Кому" required><br>
		<input type="number" id="amount" placeholder="Сумма" required><br>
		<button type="submit" class="btn">Перевести</button>
		<button type="button" onclick="history.back()">Назад</button>
	</form>
</div>
<div id="result"></div>
<script>
	document.addEventListener('DOMContentLoaded', function() {
		const transferFundsForm = document.getElementById('transferFundsForm');
		transferFundsForm.addEventListener('submit', async (event) => {
			event.preventDefault();

			try {
				const fromAddress = document.getElementById('fromAddress').value;
				const toAddress = document.getElementById('toAddress').value;
				const amount = document.getElementById('amount').value;

				await contract.methods.transferFunds(fromAddress, toAddress, amount).send({
					from: fromAddress,
					gas: 3000000
				});

				console.log('Средства успешно переведены!');
				window.location.href = "mainPage.html";
			} catch (error) {
				console.error('Ошибка при переводе средств:', error);
			}
		});
	});
</script>
</body>
</html>
